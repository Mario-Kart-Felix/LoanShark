!function(){"use strict";var t="undefined"!=typeof window?window:global;if("function"!=typeof t.require){var e={},i={},r=function(t,e){return{}.hasOwnProperty.call(t,e)},n=function(t,e){var i,r,n=[];i=/^\.\.?(\/|$)/.test(e)?[t,e].join("/").split("/"):e.split("/");for(var o=0,s=i.length;s>o;o++)r=i[o],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(i){var r=o(e),s=n(r,i);return t.require(s,e)}},a=function(t,e){var r={id:t,exports:{}};return i[t]=r,e(r.exports,s(t),r),r.exports},u=function(t,o){var s=n(t,".");if(null==o&&(o="/"),r(i,s))return i[s].exports;if(r(e,s))return a(s,e[s]);var u=n(s,"./index");if(r(i,u))return i[u].exports;if(r(e,u))return a(u,e[u]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')},l=function(t,i){if("object"==typeof t)for(var n in t)r(t,n)&&(e[n]=t[n]);else e[t]=i},c=function(){var t=[];for(var i in e)r(e,i)&&t.push(i);return t};t.require=u,t.require.define=l,t.require.register=l,t.require.list=c,t.require.brunch=!0}}(),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,r,n){t.Backbone=t.Exoskeleton=e(t,n,i,r)});else if("undefined"!=typeof exports){var i,r;try{i=require("underscore")}catch(n){}try{r=require("jquery")}catch(n){}e(t,exports,i,r)}else t.Backbone=t.Exoskeleton=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,r){"use strict";var n=t.Backbone,o=t.Exoskeleton,s=e.utils=i=i||{};e.$=r;var a=[],u=a.push,l=a.slice,c={}.toString;e.noConflict=function(){return t.Backbone=n,t.Exoskeleton=o,this},e.emulateHTTP=!1,e.emulateJSON=!1,e.extend=function(t,e){var r,n=this;r=t&&hasOwnProperty.call(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},i.extend(r,n,e);var o=function(){this.constructor=r};return o.prototype=n.prototype,r.prototype=new o,t&&i.extend(r.prototype,t),r.__super__=n.prototype,r};var h=function(){throw new Error('A "url" property or function must be specified')},p=function(t,e){var i=e.error;e.error=function(r){i&&i(t,r,e),t.trigger("error",t,r,e)}},f=function(t){return"function"==typeof i[t]};s.result=function(t,e){var i=t?t[e]:void 0;return"function"==typeof i?t[e]():i},s.defaults=function(t){return l.call(arguments,1).forEach(function(e){for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},s.extend=function(t){return l.call(arguments,1).forEach(function(e){for(var i in e)t[i]=e[i]}),t};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};s.escape=function(t){return null==t?"":String(t).replace(/[&<>"']/g,function(t){return d[t]})},s.sortBy=function(t,e,i){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,n){return{value:t,index:e,criteria:r.call(i,t,e,n)}}).sort(function(t,e){var i=t.criteria,r=e.criteria;if(i!==r){if(i>r||void 0===i)return 1;if(r>i||void 0===r)return-1}return t.index-e.index}).map(function(t){return t.value})};var g=0;s.uniqueId=function(t){var e=++g+"";return t?t+e:e};var y=function(t,e,i,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var n=c.call(t);if(n!=c.call(e))return!1;switch(n){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t===1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return r[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!("function"==typeof s&&s instanceof s&&"function"==typeof a&&a instanceof a))return!1;i.push(t),r.push(e);var u=0,l=!0;if("[object Array]"===n){if(u=t.length,l=u===e.length)for(;u--&&(l=y(t[u],e[u],i,r)););}else{for(var h in t)if(hasOwnProperty.call(t,h)&&(u++,!(l=hasOwnProperty.call(e,h)&&y(t[h],e[h],i,r))))break;if(l){for(h in e)if(hasOwnProperty.call(e,h)&&!u--)break;l=!u}}return i.pop(),r.pop(),l};s.isEqual=function(t,e){return y(t,e,[],[])},s.matchesSelector=function(){if("undefined"!=typeof document){var t,e="MatchesSelector",i=document.createElement("div");if(["matches","webkit"+e,"moz"+e,"ms"+e].some(function(e){var r=e in i;return t=e,r}),!t)throw new Error("Element#matches is not supported");return function(e,i){return e[t](i)}}}(),s.delegate=function(t,e,i,r){if("function"==typeof i&&(r=i,i=null),"function"!=typeof r)throw new TypeError("View#delegate expects callback function");var n=t.el,o=r.bind(t),a=i?function(t){for(var e=t.target;e&&e!==n;e=e.parentNode)if(s.matchesSelector(e,i))return t.delegateTarget=e,o(t)}:o;return n.addEventListener(e,a,!1),t._handlers.push({eventName:e,selector:i,callback:r,handler:a}),a},s.undelegate=function(t,e,i,r){"function"==typeof i&&(r=i,i=null);var n=t._handlers,o=function(e){t.el.removeEventListener(e.eventName,e.handler,!1)};e||i||r?n.filter(function(t){return t.eventName===e&&(r?t.callback===r:!0)&&(i?t.selector===i:!0)}).forEach(function(t){o(t),n.splice(n.indexOf(t),1)}):(n.forEach(o),t._handlers=[])},s.ajax=function(){var t=/^(?:application|text)\/xml/,i=/^application\/json/,r=function(e,r){return null==e&&(e=r.getResponseHeader("content-type")),t.test(e)?r.responseXML:i.test(e)?JSON.parse(r.responseText):r.responseText},n=function(t){return t.status>=200&&t.status<300||304===t.status||0===t.status&&"file:"===window.location.protocol},o=function(t,e,i){return function(){if(4===t.readyState){var o=t.status,s=r(e.headers&&e.headers.Accept,t);if(n(t))e.success&&e.success(s),i&&i.resolve(s);else{var a=new Error("Server responded with a status of "+o);e.error&&e.error(t,o,a),i&&i.reject(t)}}}};return function(t){if(null==t)throw new Error("You must provide options");null==t.type&&(t.type="GET");var i=new XMLHttpRequest,r=e.Deferred&&e.Deferred();if(t.contentType&&(null==t.headers&&(t.headers={}),t.headers["Content-Type"]=t.contentType),"GET"===t.type&&"object"==typeof t.data){var n="",s=function(t,e){return null==e?"":"&"+encodeURIComponent(t)+"="+encodeURIComponent(e)};for(var a in t.data)n+=s(a,t.data[a]);if(n){var u=-1===t.url.indexOf("?")?"?":"&";t.url+=u+n.substring(1)}}if(t.credentials&&(t.withCredentials=!0),i.addEventListener("readystatechange",o(i,t,r)),i.open(t.type,t.url,!0),t.headers)for(var a in t.headers)i.setRequestHeader(a,t.headers[a]);return t.beforeSend&&t.beforeSend(i),i.send(t.data),r?r.promise:void 0}}();var v=e.Events={on:function(t,e,i){if(!b(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!b(this,"once",t,[e,i])||!e)return this;var r,n=this,o=function(){r||(r=!0,n.off(t,o),e.apply(this,arguments))};return o._callback=e,this.on(t,o,i)},off:function(t,e,i){var r,n,o,s,a,u,l,c;if(!this._events||!b(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(s=t?[t]:Object.keys(this._events),a=0,u=s.length;u>a;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||i)for(l=0,c=o.length;c>l;l++)n=o[l],(e&&e!==n.callback&&e!==n.callback._callback||i&&i!==n.context)&&r.push(n);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=l.call(arguments,1);if(!b(this,"trigger",t,e))return this;var i=this._events[t],r=this._events.all;return i&&w(i,e),r&&w(r,arguments),this},stopListening:function(t,e,i){var r=this._listeningTo;if(!r)return this;var n=!e&&!i;i||"object"!=typeof e||(i=this),t&&((r={})[t._listenId]=t);for(var o in r)t=r[o],t.off(e,i,this),(n||!Object.keys(t._events).length)&&delete this._listeningTo[o];return this}},m=/\s+/,b=function(t,e,i,r){if(!i)return!0;var n;if("object"==typeof i){for(var o in i)n=[o,i[o]],u.apply(n,r),t[e].apply(t,n);return!1}if(m.test(i)){for(var s=i.split(m),a=0,l=s.length;l>a;a++)n=[s[a]],u.apply(n,r),t[e].apply(t,n);return!1}return!0},w=function(t,e){var i,r=-1,n=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<n;)(i=t[r]).callback.call(i.ctx);return;case 1:for(;++r<n;)(i=t[r]).callback.call(i.ctx,o);return;case 2:for(;++r<n;)(i=t[r]).callback.call(i.ctx,o,s);return;case 3:for(;++r<n;)(i=t[r]).callback.call(i.ctx,o,s,a);return;default:for(;++r<n;)(i=t[r]).callback.apply(i.ctx,e)}},_={listenTo:"on",listenToOnce:"once"};Object.keys(_).forEach(function(t){var e=_[t];v[t]=function(t,r,n){var o=this._listeningTo||(this._listeningTo={}),s=t._listenId||(t._listenId=i.uniqueId("l"));return o[s]=t,n||"object"!=typeof r||(n=this),t[e](r,n,this),this}}),v.bind=v.on,v.unbind=v.off;var x=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes=Object.create(null),e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{}),r=i.defaults({},r,i.result(this,"defaults")),this.set(r,e),this.changed=Object.create(null),this.initialize.apply(this,arguments)};if(i.extend(x.prototype,v,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.extend(Object.create(null),this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,r){var n,o,s,a,u,l,c,h;if(null==t)return this;if("object"==typeof t?(o=t,r=e):(o={})[t]=e,r||(r={}),!this._validate(o,r))return!1;s=r.unset,u=r.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.extend(Object.create(null),this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)e=o[n],i.isEqual(h[n],e)||a.push(n),i.isEqual(c[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete h[n]:h[n]=e;if(!u){a.length&&(this._pending=!0);for(var p=0,f=a.length;f>p;p++)this.trigger("change:"+a[p],this,h[a[p]],r)}if(l)return this;if(!u)for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!!Object.keys(this.changed).length:hasOwnProperty.call(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.extend(Object.create(null),this.changed):!1;var e,r=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in t)i.isEqual(n[o],e=t[o])||((r||(r={}))[o]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.extend(Object.create(null),this._previousAttributes)},fetch:function(t){t=t?i.extend({},t):{},void 0===t.parse&&(t.parse=!0);var e=this,r=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(r&&r(e,i,t),void e.trigger("sync",e,i,t)):!1},p(this,t),this.sync("read",this,t)},save:function(t,e,r){var n,o,s,a=this.attributes;if(null==t||"object"==typeof t?(n=t,r=e):(n={})[t]=e,r=i.extend({validate:!0},r),n&&!r.wait){if(!this.set(n,r))return!1}else if(!this._validate(n,r))return!1;n&&r.wait&&(this.attributes=i.extend(Object.create(null),a,n)),void 0===r.parse&&(r.parse=!0);var u=this,l=r.success;return r.success=function(t){u.attributes=a;var e=u.parse(t,r);return r.wait&&(e=i.extend(n||{},e)),e&&"object"==typeof e&&!u.set(e,r)?!1:(l&&l(u,t,r),void u.trigger("sync",u,t,r))},p(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=n),s=this.sync(o,this,r),n&&r.wait&&(this.attributes=a),s},destroy:function(t){t=t?i.extend({},t):{};var e=this,r=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&n(),r&&r(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;p(this,t);var o=this.sync("delete",this,t);return t.wait||n(),o},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||h();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend(Object.create(null),this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return r?(this.trigger("invalid",this,r,i.extend(e,{validationError:r})),!1):!0}}),i.keys){var E=["keys","values","pairs","invert","pick","omit"];E.filter(f).forEach(function(t){x.prototype[t]=function(){var e=l.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}})}var S=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},k={add:!0,remove:!0,merge:!0},R={add:!0,remove:!1};if(i.extend(S.prototype,v,{model:"undefined"==typeof x?null:x,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,R))},remove:function(t,e){var i=!Array.isArray(t);t=i?[t]:t.slice(),e||(e={});var r,n,o,s;for(r=0,n=t.length;n>r;r++)s=t[r]=this.get(t[r]),s&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s));return i?t[0]:t},set:function(t,e){e=i.defaults({},e,k),e.parse&&(t=this.parse(t,e));var r=!Array.isArray(t);t=r?t?[t]:[]:t.slice();var n,o,s,a,u,l,c,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,d="string"==typeof this.comparator?this.comparator:null,g=[],y=[],v={},m=e.add,b=e.merge,w=e.remove,_=!f&&m&&w?[]:!1;for(n=0,o=t.length;o>n;n++){if(u=t[n],s=u instanceof x?a=u:u[p.prototype.idAttribute],l=this.get(s))w&&(v[l.cid]=!0),b&&(u=u===a?a.attributes:u,e.parse&&(u=l.parse(u,e)),l.set(u,e),f&&!c&&l.hasChanged(d)&&(c=!0)),t[n]=l;else if(m){if(a=t[n]=this._prepareModel(u,e),!a)continue;g.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}_&&_.push(l||a)}if(w){for(n=0,o=this.length;o>n;++n)v[(a=this.models[n]).cid]||y.push(a);y.length&&this.remove(y,e)}if(g.length||_&&_.length)if(f&&(c=!0),this.length+=g.length,null!=h)for(n=0,o=g.length;o>n;n++)this.models.splice(h+n,0,g[n]);else{_&&(this.models.length=0);var E=_||g;for(n=0,o=E.length;o>n;n++)this.models.push(E[n])}if(c&&this.sort({silent:!0}),!e.silent){for(n=0,o=g.length;o>n;n++)(a=g[n]).trigger("add",a,this,e);(c||_&&_.length)&&this.trigger("sort",this,e)}return r?t[0]:t},reset:function(t,e){e||(e={});for(var r=0,n=this.models.length;n>r;r++)this._removeReference(this.models[r]);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return l.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return t&&Object.keys(t).length?this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0}):e?void 0:[]},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.models.map(function(e){return e.get(t)})},fetch:function(t){t=t?i.extend({},t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,r=this;return t.success=function(i){var n=t.reset?"reset":"set";r[n](i,t),e&&e(r,i,t),r.trigger("sync",r,i,t)},p(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.extend({},e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var r=this,n=e.success;return e.success=function(t,e,i){i.wait&&r.add(t,i),n&&n(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId=Object.create(null)},_prepareModel:function(t,e){if(t instanceof S.prototype.model)return t.collection||(t.collection=this),t;e=e?i.extend({},e):{},e.collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),f("each")){var O=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];O.filter(f).forEach(function(t){S.prototype[t]=function(){var e=l.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var j=["groupBy","countBy","sortBy"];j.filter(f).forEach(function(t){S.prototype[t]=function(e,r){var n="function"==typeof e?e:function(t){return t.get(e)};return i[t](this.models,n,r)}})}else["forEach","map","filter","some","every","reduce","reduceRight","indexOf","lastIndexOf"].forEach(function(t){S.prototype[t]=function(e,i){return this.models[t](e,i)}}),S.prototype.find=function(t,e){var i;return this.some(function(r,n,o){return t.call(e,r,n,o)?(i=r,!0):void 0}),i},["sortBy"].forEach(function(t){S.prototype[t]=function(e,r){var n="function"==typeof e?e:function(t){return t.get(e)};return i[t](this.models,n,r)}});var C=/^(\S+)\s*(.*)$/,P=["model","collection","el","id","attributes","className","tagName","events"],A=e.View=function(t){this.cid=i.uniqueId("view"),t&&Object.keys(t).forEach(function(e){-1!==P.indexOf(e)&&(this[e]=t[e])},this),this._handlers=[],this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};i.extend(A.prototype,v,{useNative:!1,tagName:"div",$:function(t){return e.$&&!this.useNative?this.$el.find(t):this.findAll(t)},find:function(t){return this.el.querySelector(t)},findAll:function(t){return l.call(this.el.querySelectorAll(t))},initialize:function(){},render:function(){return this},remove:function(){var t;return e.$&&!this.useNative?this.$el.remove():(t=this.el.parentNode)&&t.removeChild(this.el),this.stopListening(),this},setElement:function(t,i){return e.$&&!this.useNative?(this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]):(this.el&&this.undelegateEvents(),this.el="string"==typeof t?document.querySelector(t):t),i!==!1&&this.delegateEvents(),this},delegateEvents:function(t,r){if(!t&&!(t=i.result(this,"events")))return this;r||this.undelegateEvents();for(var n in t){var o=t[n];"function"!=typeof o&&(o=this[t[n]]);var a=n.match(C),u=a[1],l=a[2];e.$&&!this.useNative?(u+=".delegateEvents"+this.cid,o=o.bind(this),this.$el.on(u,l?l:null,o)):s.delegate(this,u,l,o)}return this},undelegateEvents:function(){return e.$&&!this.useNative?this.$el.off(".delegateEvents"+this.cid):s.undelegate(this),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.className=i.result(this,"className")),t["class"]&&(t.className=t["class"]);var e=i.extend(document.createElement(i.result(this,"tagName")),t);this.setElement(e,!1)}}}),e.sync=function(t,r,n){var o=T[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:o,dataType:"json"};if(n.url||(s.url=i.result(r,"url")||h()),null!=n.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(n.attrs||r.toJSON(n))),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",n.emulateJSON&&(s.data._method=o);var a=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===s.type||n.emulateJSON||(s.processData=!1);var u=n.xhr=e.ajax(i.extend(s,n));return r.trigger("request",r,u,n),u};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=e.$?function(){return e.$.ajax.apply(e.$,arguments)}:s.ajax,e.$&&(e.Deferred=function(){return new e.$.Deferred});var $=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},I=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,q=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g,N=function(t){return t?"object"==typeof t&&"[object RegExp]"===c.call(t):!1};i.extend($.prototype,v,{initialize:function(){},route:function(t,i,r){N(t)||(t=this._routeToRegExp(t)),"function"==typeof i&&(r=i,i=""),r||(r=this[i]);var n=this;return e.history.route(t,function(o){var s=n._extractParameters(t,o);r&&r.apply(n,s),n.trigger.apply(n,["route:"+i].concat(s)),n.trigger("route",i,s),e.history.trigger("route",n,i,s)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=Object.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(L,"\\$&").replace(I,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/]+)"}).replace(q,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return i.map(function(t){return t?decodeURIComponent(t):null})}});var z=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},V=/^[#\/]|\s+$/g,B=/^\/+|\/+$/g,M=/\/$/,U=/[#].*$/;return z.started=!1,i.extend(z.prototype,v,{getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t){if(null==t)if(this._wantsPushState||!this._wantsHashChange){t=this.location.pathname+this.location.search;var e=this.root.replace(M,"");t.indexOf(e)||(t=t.slice(e.length))}else t=this.getHash();return t.replace(V,"")},start:function(t){if(z.started)throw new Error("Backbone.history has already been started");z.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState;var e=this.getFragment();this.root=("/"+this.root+"/").replace(B,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=e;var r=this.location,n=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&n&&r.hash&&(this.fragment=this.getHash().replace(V,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl()},stop:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),z.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment?!1:void this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),this.handlers.some(function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!z.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(U,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),["Model","Collection","Router","View","History"].forEach(function(t){var i=e[t];i&&(i.extend=e.extend)}),i.extend(e,v),e.history=new z,e}),function(){var t=function(){var t={},e={},i=function(){return function(){}},r=function(t,r){var n={id:t,exports:{}};r(n.exports,i(),n);var o=e[t]=n.exports;return o},n=function(i){if(e.hasOwnProperty(i))return e[i];if(t.hasOwnProperty(i))return r(i,t[i]);throw new Error('Cannot find module "'+i+'"')};return n.register=function(e,i){t[e]=i},n}();t.register("chaplin/application",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h,p;p=t("underscore"),o=t("backbone"),a=t("chaplin/dispatcher"),l=t("chaplin/views/layout"),s=t("chaplin/composer"),c=t("chaplin/lib/router"),u=t("chaplin/lib/event_broker"),h=t("chaplin/mediator"),r.exports=n=function(){function t(t){null==t&&(t={}),this.initialize(t)}return t.extend=o.Model.extend,p.extend(t.prototype,u),t.prototype.title="",t.prototype.dispatcher=null,t.prototype.layout=null,t.prototype.router=null,t.prototype.composer=null,t.prototype.started=!1,t.prototype.initialize=function(t){if(null==t&&(t={}),this.started)throw new Error("Application#initialize: App was already started");return this.initRouter(t.routes,t),this.initDispatcher(t),this.initLayout(t),this.initComposer(t),this.initMediator(),this.start()},t.prototype.initDispatcher=function(t){return this.dispatcher=new a(t)},t.prototype.initLayout=function(t){var e;return null==t&&(t={}),null==(e=t.title)&&(t.title=this.title),this.layout=new l(t)},t.prototype.initComposer=function(t){return null==t&&(t={}),this.composer=new s(t)},t.prototype.initMediator=function(){return h.seal()},t.prototype.initRouter=function(t,e){return this.router=new c(e),"function"==typeof t?t(this.router.match):void 0},t.prototype.start=function(){return this.router.startHistory(),this.started=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,i,r;if(!this.disposed){for(e=["dispatcher","layout","router","composer"],i=0,r=e.length;r>i;i++)t=e[i],null!=this[t]&&this[t].dispose();return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/mediator",function(e,i,r){"use strict";var n,o,s,a,u,l,c=[].slice;n=t("backbone"),l=t("underscore"),a=t("chaplin/lib/support"),u=t("chaplin/lib/utils"),s={},s.subscribe=n.Events.on,s.unsubscribe=n.Events.off,s.publish=n.Events.trigger,s._callbacks=null,o=s._handlers={},s.setHandler=function(t,e,i){return o[t]={instance:i,method:e}},s.execute=function(){var t,e,i,r,n;if(r=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],n=!1,"object"==typeof r?(n=r.silent,i=r.name):i=r,e=o[i])return e.method.apply(e.instance,t);if(!n)throw new Error("mediator.execute: "+i+" handler is not defined")},s.removeHandlers=function(t){var e,i,r,n;if(t||(s._handlers={}),u.isArray(t))for(r=0,n=t.length;n>r;r++)i=t[r],delete o[i];else for(i in o)e=o[i],e.instance===t&&delete o[i]},u.readonly(s,"subscribe","unsubscribe","publish","setHandler","execute","removeHandlers"),s.seal=function(){return a.propertyDescriptors&&Object.seal?Object.seal(s):void 0},u.readonly(s,"seal"),r.exports=s}),t.register("chaplin/dispatcher",function(e,i,r){"use strict";var n,o,s,a,u,l;l=t("underscore"),n=t("backbone"),a=t("chaplin/mediator"),u=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),r.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=n.Model.extend,l.extend(t.prototype,s),t.prototype.previousRoute=null,t.prototype.currentController=null,t.prototype.currentRoute=null,t.prototype.currentParams=null,t.prototype.currentQuery=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.settings=l.defaults(t,{controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("router:match",this.dispatch)},t.prototype.dispatch=function(t,e,i){var r,n,o=this;return e=e?l.extend({},e):{},i=i?l.extend({},i):{},null==i.query&&(i.query={}),i.forceStartup!==!0&&(i.forceStartup=!1),!i.forceStartup&&(null!=(r=this.currentRoute)?r.controller:void 0)===t.controller&&(null!=(n=this.currentRoute)?n.action:void 0)===t.action&&l.isEqual(this.currentParams,e)&&l.isEqual(this.currentQuery,i.query)?void 0:this.loadController(t.controller,function(r){return o.controllerLoaded(t,e,i,r)})},t.prototype.loadController=function(t,e){var i,r;return i=t+this.settings.controllerSuffix,r=this.settings.controllerPath+i,("undefined"!=typeof define&&null!==define?define.amd:void 0)?require([r],e):setTimeout(function(){return e(require(r))},0)},t.prototype.controllerLoaded=function(t,e,i,r){var n,o;return this.nextPreviousRoute=this.currentRoute,o=l.extend({},this.nextPreviousRoute),null!=this.currentParams&&(o.params=this.currentParams),o.previous&&delete o.previous,this.nextCurrentRoute=l.extend({},t,{previous:o}),n=new r(e,this.nextCurrentRoute,i),this.executeBeforeAction(n,this.nextCurrentRoute,e,i)},t.prototype.executeAction=function(t,e,i,r){return this.currentController&&(this.publishEvent("beforeControllerDispose",this.currentController),this.currentController.dispose(i,e,r)),this.currentController=t,this.currentParams=i,this.currentQuery=r.query,t[e.action](i,e,r),t.redirected?void 0:this.publishEvent("dispatcher:dispatch",this.currentController,i,e,r)},t.prototype.executeBeforeAction=function(t,e,i,r){var n,o,s,a=this;if(n=t.beforeAction,o=function(){return t.redirected||a.currentRoute&&e===a.currentRoute?(a.nextPreviousRoute=a.nextCurrentRoute=null,void t.dispose()):(a.previousRoute=a.nextPreviousRoute,a.currentRoute=a.nextCurrentRoute,a.nextPreviousRoute=a.nextCurrentRoute=null,a.executeAction(t,e,i,r))},!n)return void o();if("function"!=typeof n)throw new TypeError("Controller#beforeAction: function expected. Old object-like form is not supported.");return s=t.beforeAction(i,e,r),s&&s.then?s.then(o):o()},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/composer",function(e,i,r){"use strict";var n,o,s,a,u,l,c;c=t("underscore"),n=t("backbone"),u=t("chaplin/mediator"),l=t("chaplin/lib/utils"),s=t("chaplin/lib/composition"),a=t("chaplin/lib/event_broker"),r.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=n.Model.extend,c.extend(t.prototype,a),t.prototype.compositions=null,t.prototype.initialize=function(t){return null==t&&(t={}),this.compositions={},u.setHandler("composer:compose",this.compose,this),u.setHandler("composer:retrieve",this.retrieve,this),this.subscribeEvent("dispatcher:dispatch",this.cleanup)},t.prototype.compose=function(t,e,i){return"function"==typeof e?i||e.prototype.dispose?e.prototype instanceof s?this._compose(t,{composition:e,options:i}):this._compose(t,{options:i,compose:function(){var t,i;return this.item=new e(this.options),t=this.item.autoRender,i=void 0===t||!t,i&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(t,{compose:e}):"function"==typeof i?this._compose(t,{compose:i,options:e}):this._compose(t,e)
},t.prototype._compose=function(t,e){var i,r,n,o;if("function"!=typeof e.compose&&null==e.composition)throw new Error("Composer#compose was used incorrectly");return null!=e.composition?i=new e.composition(e.options):(i=new s(e.options),i.compose=e.compose,e.check&&(i.check=e.check)),r=this.compositions[t],n=!1,r&&r.check(i.options)?r.stale(!1):(r&&r.dispose(),o=i.compose(i.options),n="function"==typeof(null!=o?o.then:void 0),i.stale(!1),this.compositions[t]=i),n?o:this.compositions[t].item},t.prototype.retrieve=function(t){var e;return e=this.compositions[t],e&&!e.stale()?e.item:void 0},t.prototype.cleanup=function(){var t,e,i;i=this.compositions;for(e in i)t=i[e],t.stale()?(t.dispose(),delete this.compositions[e]):t.stale(!0)},t.prototype.dispose=function(){var t,e,i;if(!this.disposed){this.unsubscribeAllEvents(),u.removeHandlers(this),i=this.compositions;for(e in i)t=i[e],t.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/controllers/controller",function(e,i,r){"use strict";var n,o,s,a,u,l,c=[].slice,h={}.hasOwnProperty;l=t("underscore"),n=t("backbone"),s=t("chaplin/lib/event_broker"),u=t("chaplin/lib/utils"),a=t("chaplin/mediator"),r.exports=o=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=n.Model.extend,l.extend(t.prototype,n.Events),l.extend(t.prototype,s),t.prototype.view=null,t.prototype.redirected=!1,t.prototype.initialize=function(){},t.prototype.beforeAction=function(){},t.prototype.adjustTitle=function(t){return a.execute("adjustTitle",t)},t.prototype.reuse=function(){var t;return t=1===arguments.length?"retrieve":"compose",a.execute.apply(a,["composer:"+t].concat(c.call(arguments)))},t.prototype.compose=function(){throw new Error("Controller#compose was moved to Controller#reuse")},t.prototype.redirectTo=function(t,e,i){return this.redirected=!0,u.redirectTo(t,e,i)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e;if(!this.disposed){for(e in this)h.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&(t.dispose(),delete this[e]));return this.unsubscribeAllEvents(),this.stopListening(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/models/collection",function(e,i,r){"use strict";var n,o,s,a,u,l,c={}.hasOwnProperty,h=function(t,e){function i(){this.constructor=t}for(var r in e)c.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};l=t("underscore"),n=t("backbone"),s=t("chaplin/lib/event_broker"),a=t("chaplin/models/model"),u=t("chaplin/lib/utils"),r.exports=o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),l.extend(e.prototype,s),e.prototype.model=a,e.prototype.serialize=function(){return this.map(u.serialize)},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,i,r;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["model","models","_byId","_byCid","_callbacks"],i=0,r=e.length;r>i;i++)t=e[i],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(n.Collection)}),t.register("chaplin/models/model",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h={}.hasOwnProperty,p=function(t,e){function i(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};c=t("underscore"),n=t("backbone"),l=t("chaplin/lib/utils"),o=t("chaplin/lib/event_broker"),a=function(t,e,i){var r,o,s,a,c,h,p,f;r=l.beget(e),null==i&&(i={}),i[t.cid]=!0;for(o in e)if(c=e[o],c instanceof n.Model)r[o]=u(c,t,i);else if(c instanceof n.Collection){for(a=[],f=c.models,h=0,p=f.length;p>h;h++)s=f[h],a.push(u(s,t,i));r[o]=a}return delete i[t.cid],r},u=function(t,e,i){var r;return t===e||t.cid in i?null:(r="function"==typeof t.getAttributes?t.getAttributes():t.attributes,a(t,r,i))},r.exports=s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),c.extend(e.prototype,o),e.prototype.getAttributes=function(){return this.attributes},e.prototype.serialize=function(){return a(this,this.getAttributes())},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,i,r;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),e=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],i=0,r=e.length;r>i;i++)t=e[i],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(n.Model)}),t.register("chaplin/views/layout",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h,p=function(t,e){return function(){return t.apply(e,arguments)}},f={}.hasOwnProperty,d=function(t,e){function i(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};h=t("underscore"),o=t("backbone"),l=t("chaplin/mediator"),c=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),u=t("chaplin/views/view"),n=o.$,r.exports=a=function(t){function e(t){null==t&&(t={}),this.openLink=p(this.openLink,this),this.globalRegions=[],this.title=t.title,t.regions&&(this.regions=t.regions),this.settings=h.defaults(t,{titleTemplate:function(t){var e;return e=t.subtitle?""+t.subtitle+" – ":"",e+t.title},openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),l.setHandler("region:show",this.showRegion,this),l.setHandler("region:register",this.registerRegionHandler,this),l.setHandler("region:unregister",this.unregisterRegionHandler,this),l.setHandler("region:find",this.regionByName,this),l.setHandler("adjustTitle",this.adjustTitle,this),e.__super__.constructor.apply(this,arguments),this.settings.routeLinks&&this.startLinkRouting()}return d(e,t),e.prototype.el="body",e.prototype.keepElement=!0,e.prototype.title="",e.prototype.globalRegions=null,e.prototype.listen={"beforeControllerDispose mediator":"scroll"},e.prototype.scroll=function(){var t;return t=this.settings.scrollTo,t?window.scrollTo(t[0],t[1]):void 0},e.prototype.adjustTitle=function(t){var e,i=this;return null==t&&(t=""),e=this.settings.titleTemplate({title:this.title,subtitle:t}),setTimeout(function(){return document.title=e,i.publishEvent("adjustTitle",t,e)},50),e},e.prototype.startLinkRouting=function(){var t;return(t=this.settings.routeLinks)?n?this.$el.on("click",t,this.openLink):this.delegate("click",t,this.openLink):void 0},e.prototype.stopLinkRouting=function(){var t;return t=this.settings.routeLinks,n?t?this.$el.off("click",t):void 0:this.undelegate("click",t,this.openLink)},e.prototype.isExternalLink=function(t){var e,i;return"_blank"===t.target||"external"===t.rel||"http:"!==(e=t.protocol)&&"https:"!==e&&"file:"!==e||(i=t.hostname)!==location.hostname&&""!==i},e.prototype.openLink=function(t){var e,i,r,s,a,u;if(!(c.modifierKeyPressed(t)||(e=n?t.currentTarget:t.delegateTarget,s="A"===e.nodeName,r=e.getAttribute("href")||e.getAttribute("data-href")||null,null==r||""===r||"#"===r.charAt(0)||(a=this.settings.skipRouting,u=typeof a,"function"===u&&!a(r,e)||"string"===u&&(n?n(e).is(a):o.utils.matchesSelector(e,a)))))){if(i=s&&this.isExternalLink(e))return void(this.settings.openExternalToBlank&&(t.preventDefault(),window.open(r)));c.redirectTo({url:r}),t.preventDefault()}},e.prototype.registerRegionHandler=function(t,e,i){return null!=e?this.registerGlobalRegion(t,e,i):this.registerGlobalRegions(t)},e.prototype.registerGlobalRegion=function(t,e,i){return this.unregisterGlobalRegion(t,e),this.globalRegions.unshift({instance:t,name:e,selector:i})},e.prototype.registerGlobalRegions=function(t){var e,i,r,n,o,s;for(s=c.getAllPropertyVersions(t,"regions"),n=0,o=s.length;o>n;n++){r=s[n];for(e in r)i=r[e],this.registerGlobalRegion(t,e,i)}},e.prototype.unregisterRegionHandler=function(t,e){return null!=e?this.unregisterGlobalRegion(t,e):this.unregisterGlobalRegions(t)},e.prototype.unregisterGlobalRegion=function(t,e){var i,r;return i=t.cid,this.globalRegions=function(){var t,n,o,s;for(o=this.globalRegions,s=[],t=0,n=o.length;n>t;t++)r=o[t],(r.instance.cid!==i||r.name!==e)&&s.push(r);return s}.call(this)},e.prototype.unregisterGlobalRegions=function(t){var e;return this.globalRegions=function(){var i,r,n,o;for(n=this.globalRegions,o=[],i=0,r=n.length;r>i;i++)e=n[i],e.instance.cid!==t.cid&&o.push(e);return o}.call(this)},e.prototype.regionByName=function(t){var e,i,r,n;for(n=this.globalRegions,i=0,r=n.length;r>i;i++)if(e=n[i],e.name===t&&!e.instance.stale)return e},e.prototype.showRegion=function(t,e){var i;if(i=this.regionByName(t),!i)throw new Error("No region registered under "+t);return e.container=""===i.selector?n?i.instance.$el:i.instance.el:i.instance.noWrap?n?n(i.instance.container).find(i.selector):i.instance.container.querySelector(i.selector):i.instance[n?"$":"find"](i.selector)},e.prototype.dispose=function(){var t,i,r,n;if(!this.disposed){for(this.stopLinkRouting(),n=["globalRegions","title","route"],i=0,r=n.length;r>i;i++)t=n[i],delete this[t];return l.removeHandlers(this),e.__super__.dispose.apply(this,arguments)}},e}(u)}),t.register("chaplin/views/view",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h,p,f,d={}.hasOwnProperty,g=function(t,e){function i(){this.constructor=t}for(var r in e)d.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},y=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};f=t("underscore"),o=t("backbone"),c=t("chaplin/mediator"),s=t("chaplin/lib/event_broker"),p=t("chaplin/lib/utils"),n=o.$,l=function(){return Function.prototype.bind?function(t,e){return t.bind(e)}:f.bind?f.bind:void 0}(),h=function(){return n?function(t,e){return t.html(e)}:function(t,e){return t.innerHTML=e}}(),u=function(){return n?function(t){var e;return e=n(t.container),"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}:function(t){var e;return e="string"==typeof t.container?document.querySelector(t.container):t.container,"function"==typeof t.containerMethod?t.containerMethod(e,t.el):e[t.containerMethod](t.el)}}(),r.exports=a=function(t){function e(t){var i,r,o,s,a=this;if(t)for(i in t)r=t[i],y.call(this.optionNames,i)>=0&&(this[i]=r);s=this.render,this.render=function(){return a.disposed?!1:(s.apply(a,arguments),a.autoAttach&&a.attach.apply(a,arguments),a)},this.subviews=[],this.subviewsByName={},this.noWrap&&(this.region&&(o=c.execute("region:find",this.region),null!=o&&(this.el=null!=o.instance.container?null!=o.instance.region?n(o.instance.container).find(o.selector):o.instance.container:o.instance.$(o.selector))),this.container&&(this.el=this.container)),e.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",function(t){return t&&t!==a.collection?void 0:a.dispose()}),null!=this.regions&&c.execute("region:register",this),this.autoRender&&this.render()}return g(e,t),f.extend(e.prototype,s),e.prototype.autoRender=!1,e.prototype.autoAttach=!0,e.prototype.container=null,e.prototype.containerMethod=n?"append":"appendChild",e.prototype.regions=null,e.prototype.region=null,e.prototype.stale=!1,e.prototype.noWrap=!1,e.prototype.keepElement=!1,e.prototype.subviews=null,e.prototype.subviewsByName=null,e.prototype.optionNames=["autoAttach","autoRender","container","containerMethod","region","regions","noWrap"],e.prototype.delegate=function(t,e,i){var r,n,s,a,u,c;if(o.utils)return o.utils.delegate(this,t,e,i);if("string"!=typeof t)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)a=e;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(c=e,"string"!=typeof c)throw new TypeError("View#delegate: second argument must be a string");a=i}if("function"!=typeof a)throw new TypeError("View#delegate: handler argument must be function");return u=function(){var e,i,r,o;for(r=t.split(" "),o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(""+n+".delegate"+this.cid);return o}.call(this),s=u.join(" "),r=l(a,this),this.$el.on(s,c||null,r),r},e.prototype._delegateEvents=function(t){var e,i,r,n,s,a,u;if(2===o.View.prototype.delegateEvents.length)return o.View.prototype.delegateEvents.call(this,t,!0);for(n in t){if(u=t[n],r="function"==typeof u?u:this[u],!r)throw new Error("Method '"+u+"' does not exist");s=n.match(/^(\S+)\s*(.*)$/),i=""+s[1]+".delegateEvents"+this.cid,a=s[2],e=l(r,this),this.$el.on(i,a||null,e)}},e.prototype.delegateEvents=function(t,e){var i,r,n,o;if(e||this.undelegateEvents(),t)return this._delegateEvents(t);for(o=p.getAllPropertyVersions(this,"events"),r=0,n=o.length;n>r;r++){if(i=o[r],"function"==typeof i)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(i)}},e.prototype.undelegate=function(t,e,i){var r,n,s,a,u;if(o.utils)return o.utils.undelegate(this,t,e,i);if(t){if("string"!=typeof t)throw new TypeError("View#undelegate: first argument must be a string");if(2===arguments.length)"string"==typeof e?u=e:s=e;else if(3===arguments.length){if(u=e,"string"!=typeof u)throw new TypeError("View#undelegate: second argument must be a string");s=i}return a=function(){var e,i,n,o;for(n=t.split(" "),o=[],e=0,i=n.length;i>e;e++)r=n[e],o.push(""+r+".delegate"+this.cid);return o}.call(this),n=a.join(" "),this.$el.off(n,u||null)}return this.$el.off(".delegate"+this.cid)},e.prototype.delegateListeners=function(){var t,e,i,r,n,o,s,a,u;if(this.listen)for(a=p.getAllPropertyVersions(this,"listen"),o=0,s=a.length;s>o;o++){n=a[o];for(e in n){if(i=n[e],"function"!=typeof i&&(i=this[i]),"function"!=typeof i)throw new Error("View#delegateListeners: "+(""+i+" must be function"));u=e.split(" "),t=u[0],r=u[1],this.delegateListener(t,r,i)}}},e.prototype.delegateListener=function(t,e,i){var r;"model"===e||"collection"===e?(r=this[e],r&&this.listenTo(r,t,i)):"mediator"===e?this.subscribeEvent(t,i):e||this.on(t,i,this)},e.prototype.registerRegion=function(t,e){return c.execute("region:register",this,t,e)},e.prototype.unregisterRegion=function(t){return c.execute("region:unregister",this,t)},e.prototype.unregisterAllRegions=function(){return c.execute({name:"region:unregister",silent:!0},this)},e.prototype.subview=function(t,e){var i,r;return r=this.subviews,i=this.subviewsByName,t&&e?(this.removeSubview(t),r.push(e),i[t]=e,e):t?i[t]:void 0},e.prototype.removeSubview=function(t){var e,i,r,n,o,s,a;if(t){if(s=this.subviews,e=this.subviewsByName,"string"==typeof t)r=t,a=e[r];else{a=t;for(n in e)if(o=e[n],o===a){r=n;break}}if(r&&a&&a.dispose)return a.dispose(),i=p.indexOf(s,a),-1!==i&&s.splice(i,1),delete e[r]}},e.prototype.getTemplateData=function(){var t,e;return t=this.model?p.serialize(this.model):this.collection?{items:p.serialize(this.collection),length:this.collection.length}:{},e=this.model||this.collection,e&&("function"!=typeof e.isSynced||"synced"in t||(t.synced=e.isSynced())),t},e.prototype.getTemplateFunction=function(){throw new Error("View#getTemplateFunction must be overridden")},e.prototype.render=function(){var t,e,i;if(this.disposed)return!1;if(i=this.getTemplateFunction(),"function"==typeof i)if(e=i(this.getTemplateData()),this.noWrap){if(t=document.createElement("div"),t.innerHTML=e,t.children.length>1)throw new Error("There must be a single top-level element when using `noWrap`.");this.undelegateEvents(),this.setElement(t.firstChild,!0)}else h(n?this.$el:this.el,e);return this},e.prototype.attach=function(){return null!=this.region&&c.execute("region:show",this.region,this),this.container&&!document.body.contains(this.el)?(u(this),this.trigger("addedToDOM")):void 0},e.prototype.disposed=!1,e.prototype.dispose=function(){var t,e,i,r,n,o,s,a;if(!this.disposed){for(this.unregisterAllRegions(),a=this.subviews,r=0,o=a.length;o>r;r++)i=a[r],i.dispose();for(this.unsubscribeAllEvents(),this.off(),this.keepElement?(this.undelegateEvents(),this.undelegate(),this.stopListening()):this.remove(),e=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],n=0,s=e.length;s>n;n++)t=e[n],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}(o.View)}),t.register("chaplin/views/collection_view",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h,p,f,d,g,y=function(t,e){return function(){return t.apply(e,arguments)}},v={}.hasOwnProperty,m=function(t,e){function i(){this.constructor=t}for(var r in e)v.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};g=t("underscore"),o=t("backbone"),a=t("chaplin/views/view"),d=t("chaplin/lib/utils"),n=o.$,c=function(t,e){var i,r,n,s;if(!e)return t;for(s=[],r=0,n=t.length;n>r;r++)i=t[r],o.utils.matchesSelector(i,e)&&s.push(i);return s},f=function(){return n?function(t,e){return t.toggle(e)}:function(t,e){return t.style.display=e?"":"none"}}(),u=function(){return n?function(t,e){return t.addClass(e)}:function(t,e){return t.classList.add(e)}}(),p=function(){return n?function(t,e,i){return e?u(t,i):t.css("opacity",0)}:function(t,e,i){return e?u(t,i):t.style.opacity=0}}(),l=function(){return n?function(t,e){return t.animate({opacity:1},e)}:function(t,e){return t.style.transition="opacity "+e/1e3+"s",t.opacity=1}}(),h=function(){return n?function(t,e,i,r,n){var o,s,a,u,l;return a=i>0&&r>i,u=function(t){return 0===t||i===t},a||n?(o=t.children(n),s=o.length,o[i]!==e?u(s)?t.append(e):0===i?o.eq(i).before(e):o.eq(i-1).after(e):void 0):(l=u(r)?"append":"prepend",t[l](e))}:function(t,e,i,r,n){var o,s,a,u,l;return a=i>0&&r>i,u=function(t){return 0===t||i===t},a||n?(o=c(t.children,n),s=o.length,o[i]!==e?u(s)?t.appendChild(e):0===i?t.insertBefore(e,o[i]):(l=o[i-1],t.lastChild===l?t.appendChild(e):t.insertBefore(e,l.nextElementSibling)):void 0):u(r)?t.appendChild(e):t.insertBefore(e,t.firstChild)}}(),r.exports=s=function(t){function e(){this.renderAllItems=y(this.renderAllItems,this),this.toggleFallback=y(this.toggleFallback,this),this.itemsReset=y(this.itemsReset,this),this.itemRemoved=y(this.itemRemoved,this),this.itemAdded=y(this.itemAdded,this),this.visibleItems=[],e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.itemView=null,e.prototype.autoRender=!0,e.prototype.renderItems=!0,e.prototype.animationDuration=500,e.prototype.useCssAnimation=!1,e.prototype.animationStartClass="animated-item-view",e.prototype.animationEndClass="animated-item-view-end",e.prototype.listSelector=null,e.prototype.$list=null,e.prototype.fallbackSelector=null,e.prototype.$fallback=null,e.prototype.loadingSelector=null,e.prototype.$loading=null,e.prototype.itemSelector=void 0,e.prototype.filterer=null,e.prototype.filterCallback=function(t,e){return n&&t.$el.stop(!0,!0),f(n?t.$el:t.el,e)},e.prototype.visibleItems=null,e.prototype.optionNames=a.prototype.optionNames.concat(["renderItems","itemView"]),e.prototype.initialize=function(t){return null==t&&(t={}),this.addCollectionListeners(),null!=t.filterer?this.filter(t.filterer):void 0},e.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},e.prototype.getTemplateData=function(){var t;return t={length:this.collection.length},"function"==typeof this.collection.isSynced&&(t.synced=this.collection.isSynced()),t},e.prototype.getTemplateFunction=function(){},e.prototype.render=function(){var t;return e.__super__.render.apply(this,arguments),t=g.result(this,"listSelector"),n?this.$list=t?this.$(t):this.$el:this.list=t?this.find(this.listSelector):this.el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},e.prototype.itemAdded=function(t,e,i){return this.insertView(t,this.renderItem(t),i.at)},e.prototype.itemRemoved=function(t){return this.removeViewForItem(t)},e.prototype.itemsReset=function(){return this.renderAllItems()},e.prototype.initFallback=function(){return this.fallbackSelector?(n?this.$fallback=this.$(this.fallbackSelector):this.fallback=this.find(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},e.prototype.toggleFallback=function(){var t;return t=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),f(n?this.$fallback:this.fallback,t)},e.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(n?this.$loading=this.$(this.loadingSelector):this.loading=this.find(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},e.prototype.toggleLoadingIndicator=function(){var t;return t=0===this.collection.length&&this.collection.isSyncing(),f(n?this.$loading:this.loading,t)},e.prototype.getItemViews=function(){var t,e,i,r;if(t={},this.subviews.length>0){r=this.subviewsByName;for(e in r)i=r[e],"itemView:"===e.slice(0,9)&&(t[e.slice(9)]=i)}return t},e.prototype.filter=function(t,e){var i,r,n,o,s,a,u,l,c=this;if(("function"==typeof t||null===t)&&(this.filterer=t),("function"==typeof e||null===e)&&(this.filterCallback=e),i=function(){var t;if(c.subviews.length>0)for(t in c.subviewsByName)if("itemView:"===t.slice(0,9))return!0;return!1}())for(l=this.collection.models,n=a=0,u=l.length;u>a;n=++a){if(o=l[n],r="function"==typeof this.filterer?this.filterer(o,n):!0,s=this.subview("itemView:"+o.cid),!s)throw new Error("CollectionView#filter: no view found for "+o.cid);this.filterCallback(s,r),this.updateVisibleItems(s.model,r,!1)}return this.trigger("visibilityChange",this.visibleItems)},e.prototype.renderAllItems=function(){var t,e,i,r,n,o,s,a,u,l,c;for(r=this.collection.models,this.visibleItems=[],n={},s=0,u=r.length;u>s;s++)i=r[s],o=this.subview("itemView:"+i.cid),o&&(n[i.cid]=o);c=this.getItemViews();for(t in c)v.call(c,t)&&(o=c[t],t in n||this.removeSubview("itemView:"+t));for(e=a=0,l=r.length;l>a;e=++a)i=r[e],o=this.subview("itemView:"+i.cid),o?this.insertView(i,o,e,!1):this.insertView(i,this.renderItem(i),e);return 0===r.length?this.trigger("visibilityChange",this.visibleItems):void 0},e.prototype.renderItem=function(t){var e;return e=this.subview("itemView:"+t.cid),e||(e=this.initItemView(t),this.subview("itemView:"+t.cid,e)),e.render(),e},e.prototype.initItemView=function(t){if(this.itemView)return new this.itemView({autoRender:!1,model:t});throw new Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},e.prototype.insertView=function(t,e,i,r){var o,s,a,c,f=this;return null==r&&(r=!0),0===this.animationDuration&&(r=!1),"number"!=typeof i&&(i=this.collection.indexOf(t)),s="function"==typeof this.filterer?this.filterer(t,i):!0,o=n?e.$el:e.el,s&&r&&p(o,this.useCssAnimation,this.animationStartClass),this.filterer&&this.filterCallback(e,s),a=this.collection.length,c=n?this.$list:this.list,h(c,o,i,a,this.itemSelector),e.trigger("addedToParent"),this.updateVisibleItems(t,s),s&&r&&(this.useCssAnimation?setTimeout(function(){return u(o,f.animationEndClass)},0):l(o,this.animationDuration)),e},e.prototype.removeViewForItem=function(t){return this.updateVisibleItems(t,!1),this.removeSubview("itemView:"+t.cid)},e.prototype.updateVisibleItems=function(t,e,i){var r,n,o;return null==i&&(i=!0),n=!1,o=d.indexOf(this.visibleItems,t),r=-1!==o,e&&!r?(this.visibleItems.push(t),n=!0):!e&&r&&(this.visibleItems.splice(o,1),n=!0),n&&i&&this.trigger("visibilityChange",this.visibleItems),n},e.prototype.dispose=function(){var t,i,r,n;if(!this.disposed){for(i=["$list","$fallback","$loading","visibleItems"],r=0,n=i.length;n>r;r++)t=i[r],delete this[t];return e.__super__.dispose.apply(this,arguments)}},e}(a)}),t.register("chaplin/lib/route",function(e,i,r){"use strict";var n,o,s,a,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty;l=t("underscore"),n=t("backbone"),s=t("chaplin/lib/event_broker"),o=t("chaplin/controllers/controller"),u=t("chaplin/lib/utils"),r.exports=a=function(){function t(t,e,i,r){var n;if(this.pattern=t,this.controller=e,this.action=i,this.handler=c(this.handler,this),this.replaceParams=c(this.replaceParams,this),this.parseOptionalPortion=c(this.parseOptionalPortion,this),"string"!=typeof this.pattern)throw new Error("Route: RegExps are not supported.        Use strings with :names and `constraints` option of route");if(this.options=r?l.extend({},r):{},null!=this.options.name&&(this.name=this.options.name),this.name&&-1!==this.name.indexOf("#"))throw new Error('Route: "#" cannot be used in name');if(null==(n=this.name)&&(this.name=this.controller+"#"+this.action),this.allParams=[],this.requiredParams=[],this.optionalParams=[],this.action in o.prototype)throw new Error("Route: You should not use existing controller properties as action names");this.createRegExp(),"function"==typeof Object.freeze&&Object.freeze(this)}var e,i,r,a;return t.extend=n.Model.extend,l.extend(t.prototype,s),e=/[\-{}\[\]+?.,\\\^$|#\s]/g,i=/\((.*?)\)/g,r=/(?::|\*)(\w+)/g,a=function(t,e){switch(e){case!0:"/"!==t.slice(-1)&&(t+="/");break;case!1:"/"===t.slice(-1)&&(t=t.slice(0,-1))}return t},t.prototype.matches=function(t){var e,i,r,n,o,s,a;if("string"==typeof t)return t===this.name;for(r=0,a=["name","action","controller"],o=0,s=a.length;s>o;o++)if(i=a[o],r++,n=t[i],n&&n!==this[i])return!1;return e=1===r&&("action"===i||"controller"===i),!e},t.prototype.reverse=function(t,e){var r,n,o,s,l,c,h,p,f,d;if(t=this.normalizeParams(t),t===!1)return!1;for(o=this.pattern,f=this.requiredParams,l=0,h=f.length;h>l;l++)r=f[l],s=t[r],o=o.replace(RegExp("[:*]"+r,"g"),s);for(d=this.optionalParams,c=0,p=d.length;p>c;c++)r=d[c],(s=t[r])&&(o=o.replace(RegExp("[:*]"+r,"g"),s));return o=o.replace(i,function(t,e){return e.match(/[:*]/g)?"":e}),o=a(o,this.options.trailing),e?"object"==typeof e?(n=u.queryParams.stringify(e),o+=n?"?"+n:""):o+=("?"===e[0]?"":"?")+e:o},t.prototype.normalizeParams=function(t){var e,i,r,n,o,s;if(u.isArray(t)){if(t.length<this.requiredParams.length)return!1;for(r={},s=this.requiredParams,e=n=0,o=s.length;o>n;e=++n)i=s[e],r[i]=t[e];if(!this.testConstraints(r))return!1;t=r}else if(null==t&&(t={}),!this.testParams(t))return!1;return t},t.prototype.testConstraints=function(t){var e,i,r;if(i=this.options.constraints)for(r in i)if(h.call(i,r)&&(e=i[r],!e.test(t[r])))return!1;return!0},t.prototype.testParams=function(t){var e,i,r,n;for(n=this.requiredParams,i=0,r=n.length;r>i;i++)if(e=n[i],void 0===t[e])return!1;return this.testConstraints(t)},t.prototype.createRegExp=function(){var t,r=this;return t=this.pattern,t=t.replace(e,"\\$&"),this.replaceParams(t,function(t,e){return r.allParams.push(e)}),t=t.replace(i,this.parseOptionalPortion),t=this.replaceParams(t,function(t,e){return r.requiredParams.push(e),r.paramCapturePattern(t)}),this.regExp=RegExp("^"+t+"(?=\\/?(\\?|$))")},t.prototype.parseOptionalPortion=function(t,e){var i,r=this;return i=this.replaceParams(e,function(t,e){return r.optionalParams.push(e),r.paramCapturePattern(t)}),"(?:"+i+")?"},t.prototype.replaceParams=function(t,e){return t.replace(r,e)},t.prototype.paramCapturePattern=function(t){return":"===t.charAt(0)?"([^/?]+)":"(.*?)"},t.prototype.test=function(t){var e,i;return(i=this.regExp.test(t))?(e=this.options.constraints,e?this.testConstraints(this.extractParams(t)):!0):!1},t.prototype.handler=function(t,e){var i,r,n,o,s,c;return e=e?l.extend({},e):{},"object"==typeof t?(o=u.queryParams.stringify(e.query),r=t,n=this.reverse(r)):(c=t.split("?"),n=c[0],o=c[1],null==o?o="":e.query=u.queryParams.parse(o),r=this.extractParams(n),n=a(n,this.options.trailing)),i=l.extend({},r,this.options.params),s={path:n,action:this.action,controller:this.controller,name:this.name,query:o},this.publishEvent("router:match",s,i,e)},t.prototype.extractParams=function(t){var e,i,r,n,o,s,a,u;for(o={},r=this.regExp.exec(t),u=r.slice(1),e=s=0,a=u.length;a>s;e=++s)i=u[e],n=this.allParams.length?this.allParams[e]:e,o[n]=i;return o},t}()}),t.register("chaplin/lib/router",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h,p=function(t,e){return function(){return t.apply(e,arguments)}};h=t("underscore"),n=t("backbone"),l=t("chaplin/mediator"),o=t("chaplin/lib/event_broker"),s=t("chaplin/lib/history"),a=t("chaplin/lib/route"),c=t("chaplin/lib/utils"),r.exports=u=function(){function t(t){var e;this.options=null!=t?t:{},this.match=p(this.match,this),e="file:"!==window.location.protocol,h.defaults(this.options,{pushState:e,root:"/",trailing:!1}),this.removeRoot=new RegExp("^"+c.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.oldEventError),this.subscribeEvent("!router:routeByName",this.oldEventError),this.subscribeEvent("!router:changeURL",this.oldURLEventError),this.subscribeEvent("dispatcher:dispatch",this.changeURL),l.setHandler("router:route",this.route,this),l.setHandler("router:reverse",this.reverse,this),this.createHistory()}return t.extend=n.Model.extend,h.extend(t.prototype,o),t.prototype.oldEventError=function(){throw new Error("!router:route and !router:routeByName events were removed.  Use `Chaplin.utils.redirectTo`")},t.prototype.oldURLEventError=function(){throw new Error("!router:changeURL event was removed.")},t.prototype.createHistory=function(){return n.history=new s},t.prototype.startHistory=function(){return n.history.start(this.options)},t.prototype.stopHistory=function(){return n.History.started?n.history.stop():void 0},t.prototype.findHandler=function(t){var e,i,r,o;for(o=n.history.handlers,i=0,r=o.length;r>i;i++)if(e=o[i],t(e))return e},t.prototype.match=function(t,e,i){var r,o,s,u;if(null==i&&(i={}),2===arguments.length&&"object"==typeof e){if(i=e,o=i.controller,r=i.action,!o||!r)throw new Error("Router#match must receive either target or options.controller & options.action")}else{if(o=i.controller,r=i.action,o||r)throw new Error("Router#match cannot use both target and options.controller / options.action");u=e.split("#"),o=u[0],r=u[1]}return h.defaults(i,{trailing:this.options.trailing}),s=new a(t,o,r,i),n.history.handlers.push({route:s,callback:s.handler}),s},t.prototype.route=function(t,e,i){var r,n;if("object"==typeof t&&(n=t.url,!e&&t.params&&(e=t.params)),e=e?c.isArray(e)?e.slice():h.extend({},e):{},null!=n?(n=n.replace(this.removeRoot,""),r=this.findHandler(function(t){return t.route.test(n)}),i=e,e=null):(i=i?h.extend({},i):{},r=this.findHandler(function(i){return i.route.matches(t)&&(e=i.route.normalizeParams(e))?!0:!1})),r)return h.defaults(i,{changeURL:!0}),r.callback(n||e,i),!0;throw new Error("Router#route: request was not routed")},t.prototype.reverse=function(t,e,i){var r,o,s,a,u,l,c;if(a=this.options.root,null!=e&&"object"!=typeof e)throw new TypeError("Router#reverse: params must be an array or an object");for(o=n.history.handlers,l=0,c=o.length;c>l;l++)if(r=o[l],r.route.matches(t)&&(s=r.route.reverse(e,i),s!==!1))return u=a?a+s:s;throw new Error("Router#reverse: invalid route specified")},t.prototype.changeURL=function(t,e,i,r){var o,s;if(null!=i.path&&r.changeURL)return s=i.path+(i.query?"?"+i.query:""),o={trigger:r.trigger===!0,replace:r.replace===!0},n.history.navigate(s,o)},t.prototype.disposed=!1,t.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete n.history,this.unsubscribeAllEvents(),l.removeHandlers(this),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},t}()}),t.register("chaplin/lib/history",function(e,i,r){"use strict";var n,o,s,a,u,l,c,h={}.hasOwnProperty,p=function(t,e){function i(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);
return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};c=t("underscore"),n=t("backbone"),u=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,s=/msie [\w.]+/,l=/\/$/,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e.prototype.getFragment=function(t,e){var i;return null==t&&(this._hasPushState||!this._wantsHashChange||e?(t=this.location.pathname+this.location.search,i=this.root.replace(l,""),t.indexOf(i)||(t=t.substr(i.length))):t=this.getHash()),t.replace(u,"")},e.prototype.start=function(t){var e,i,r;if(n.History.started)throw new Error("Backbone.history has already been started");return n.History.started=!0,this.options=c.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=Boolean(this.options.pushState),this._hasPushState=Boolean(this.options.pushState&&this.history&&this.history.pushState),i=this.getFragment(),this.root=("/"+this.root+"/").replace(a,"/"),this._hasPushState?n.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window?n.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i,r=this.location,e=r.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!e?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&e&&r.hash&&(this.fragment=this.getHash().replace(u,""),this.history.replaceState({},document.title,this.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},e.prototype.navigate=function(t,e){var i,r,o;if(null==t&&(t=""),!n.History.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t),o=this.root+t,this.fragment===t)return!1;if(this.fragment=t,0===t.length&&"/"!==o&&(o=o.slice(0,-1)),this._hasPushState)i=e.replace?"replaceState":"pushState",this.history[i]({},document.title,o);else{if(!this._wantsHashChange)return this.location.assign(o);this._updateHash(this.location,t,e.replace),r=t!==this.getFragment(this.getHash(this.iframe)),null!=this.iframe&&r&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0},e}(n.History),r.exports=n.$?o:n.History}),t.register("chaplin/lib/event_broker",function(e,i,r){"use strict";var n,o,s=[].slice;o=t("chaplin/mediator"),n={subscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return o.unsubscribe(t,e,this),o.subscribe(t,e,this)},unsubscribeEvent:function(t,e){if("string"!=typeof t)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof e)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return o.unsubscribe(t,e)},unsubscribeAllEvents:function(){return o.unsubscribe(null,null,this)},publishEvent:function(){var t,e;if(e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],"string"!=typeof e)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return o.publish.apply(o,[e].concat(s.call(t)))}},"function"==typeof Object.freeze&&Object.freeze(n),r.exports=n}),t.register("chaplin/lib/support",function(t,e,i){"use strict";var r;r={propertyDescriptors:function(){var t;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return t={},Object.defineProperty(t,"foo",{value:"bar"}),"bar"===t.foo}catch(e){return!1}}()},i.exports=r}),t.register("chaplin/lib/composition",function(e,i,r){"use strict";var n,o,s,a,u,l={}.hasOwnProperty;u=t("underscore"),n=t("backbone"),s=t("chaplin/lib/event_broker"),a=Object.prototype.hasOwnProperty,r.exports=o=function(){function t(t){null!=t&&(this.options=u.extend({},t)),this.item=this,this.initialize(this.options)}return t.extend=n.Model.extend,u.extend(t.prototype,n.Events),u.extend(t.prototype,s),t.prototype.item=null,t.prototype.options=null,t.prototype._stale=!1,t.prototype.initialize=function(){},t.prototype.compose=function(){},t.prototype.check=function(t){return u.isEqual(this.options,t)},t.prototype.stale=function(t){var e,i;if(null==t)return this._stale;this._stale=t;for(i in this)e=this[i],e&&e!==this&&"object"==typeof e&&a.call(e,"stale")&&(e.stale=t)},t.prototype.disposed=!1,t.prototype.dispose=function(){var t,e,i,r,n;if(!this.disposed){for(e in this)l.call(this,e)&&(t=this[e],t&&"function"==typeof t.dispose&&t!==this&&(t.dispose(),delete this[e]));for(this.unsubscribeAllEvents(),this.stopListening(),i=["redirected"],r=0,n=i.length;n>r;r++)e=i[r],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}()}),t.register("chaplin/lib/sync_machine",function(t,e,i){"use strict";var r,n,o,s,a,u,l,c,h,p;for(a="unsynced",o="syncing",n="synced",r="syncStateChange",s={_syncState:a,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===a},isSynced:function(){return this._syncState===n},isSyncing:function(){return this._syncState===o},unsync:function(){var t;((t=this._syncState)===o||t===n)&&(this._previousSync=this._syncState,this._syncState=a,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},beginSync:function(){var t;((t=this._syncState)===a||t===n)&&(this._previousSync=this._syncState,this._syncState=o,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},finishSync:function(){this._syncState===o&&(this._previousSync=this._syncState,this._syncState=n,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},abortSync:function(){this._syncState===o&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))}},p=[a,o,n,r],l=function(t){return s[t]=function(e,i){return null==i&&(i=this),this.on(t,e,i),this._syncState===t?e.call(i):void 0}},c=0,h=p.length;h>c;c++)u=p[c],l(u);"function"==typeof Object.freeze&&Object.freeze(s),i.exports=s}),t.register("chaplin/lib/utils",function(e,i,r){"use strict";var n,o,s,a=[].slice,u=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},l={}.hasOwnProperty;s=t("underscore"),n=t("chaplin/lib/support"),o={beget:function(){var t;return"function"==typeof Object.create?Object.create:(t=function(){},function(e){return t.prototype=e,new t})}(),indexOf:function(){return Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:s.indexOf?s.indexOf:void 0}(),isArray:Array.isArray||s.isArray,serialize:function(t){if("function"==typeof t.serialize)return t.serialize();if("function"==typeof t.toJSON)return t.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var t;return n.propertyDescriptors?(t={writable:!1,enumerable:!0,configurable:!1},function(){var e,i,r,n,o;for(e=arguments[0],r=2<=arguments.length?a.call(arguments,1):[],n=0,o=r.length;o>n;n++)i=r[n],t.value=e[i],Object.defineProperty(e,i,t);return!0}):function(){return!1}}(),getPrototypeChain:function(t){var e,i,r,n;for(e=[t.constructor.prototype];t=null!=(i=null!=(r=t.constructor)?r.__super__:void 0)?i:null!=(n=t.constructor)?n.superclass:void 0;)e.push(t);return e.reverse()},getAllPropertyVersions:function(t,e){var i,r,n,s,a,l;for(r=[],l=o.getPrototypeChain(t),s=0,a=l.length;a>s;s++)i=l[s],n=i[e],n&&u.call(r,n)<0&&r.push(n);return r},upcase:function(t){return t.charAt(0).toUpperCase()+t.substring(1)},escapeRegExp:function(t){return String(t||"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(t){return t.shiftKey||t.altKey||t.ctrlKey||t.metaKey},reverse:function(e,i,r){return t("chaplin/mediator").execute("router:reverse",e,i,r)},redirectTo:function(e,i,r){return t("chaplin/mediator").execute("router:route",e,i,r)},queryParams:{stringify:function(t){var e,i,r,n,s,a,u,c;n="",s=function(t,e){return null!=e?"&"+t+"="+encodeURIComponent(e):""};for(r in t)if(l.call(t,r))if(a=t[r],i=encodeURIComponent(r),o.isArray(a))for(u=0,c=a.length;c>u;u++)e=a[u],n+=s(i,e);else n+=s(i,a);return n&&n.substring(1)},parse:function(t){var e,i,r,n,o,s,a,u,l;if(o={},!t)return o;for(n=t.split("&"),a=0,u=n.length;u>a;a++)r=n[a],r.length&&(l=r.split("="),i=l[0],s=l[1],i.length&&(i=decodeURIComponent(i),s=decodeURIComponent(s),e=o[i],e?e.push?e.push(s):o[i]=[e,s]:o[i]=s));return o}}},"function"==typeof Object.seal&&Object.seal(o),r.exports=o}),t.register("chaplin",function(e,i,r){r.exports={Application:t("chaplin/application"),mediator:t("chaplin/mediator"),Dispatcher:t("chaplin/dispatcher"),Controller:t("chaplin/controllers/controller"),Composer:t("chaplin/composer"),Composition:t("chaplin/lib/composition"),Collection:t("chaplin/models/collection"),Model:t("chaplin/models/model"),Layout:t("chaplin/views/layout"),View:t("chaplin/views/view"),CollectionView:t("chaplin/views/collection_view"),Route:t("chaplin/lib/route"),Router:t("chaplin/lib/router"),EventBroker:t("chaplin/lib/event_broker"),support:t("chaplin/lib/support"),SyncMachine:t("chaplin/lib/sync_machine"),utils:t("chaplin/lib/utils")}});var e=function(e,i){t.register("backbone",function(t,i,r){r.exports=e}),t.register("underscore",function(t,e,r){r.exports=i})};if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(i,r){return e(i,r),t("chaplin")});else if("object"==typeof module&&module&&module.exports)e(require("backbone"),require("underscore")),module.exports=t("chaplin");else{if("function"!=typeof require)throw new Error("Chaplin requires Common.js or AMD modules");e(window.Backbone,window._||window.Backbone.utils),window.Chaplin=t("chaplin")}}(),function(t){"use strict";for(var e,i,r={},n=function(){},o="memory".split(","),s="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");e=o.pop();)t[e]=t[e]||r;for(;i=s.pop();)t[i]=t[i]||n}(window.console=window.console||{}),function(t,e){"object"==typeof exports&&"function"==typeof require?module.exports=e(require("backbone")):"function"==typeof define&&define.amd?define(["backbone"],function(i){return e(i||t.Backbone)}):e(Backbone)}(this,function(t){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function i(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}t.LocalStorage=window.Store=function(t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=t;var e=this.localStorage().getItem(this.name);this.records=e&&e.split(",")||[]};var r=Array.prototype,n=(Object.prototype,Function.prototype,r.indexOf),o=(r.slice,r.filter);return _extend=function(t){return ps=Array.prototype.slice.call(arguments,1),ps.forEach(function(e){if(e)for(var i in e)t[i]=e[i]}),t},_contains=_include=function(t,e){return null==t?!1:n&&t.indexOf===n?-1!=t.indexOf(e):any(t,function(t){return t===e})},_chain=function(t){return _(t).chain()},_filter=_select=function(t,e,i){var r=[];return null==t?r:o&&t.filter===o?t.filter(e,i):(each(t,function(t,n,o){e.call(i,t,n,o)&&r.push(t)}),r)},_reject=function(t,e,i){return _filter(t,function(t,r,n){return!e.call(i,t,r,n)},i)},_extend(t.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(t){return t.id||(t.id=i(),t.set(t.idAttribute,t.id)),this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),this.records.push(t.id.toString()),this.save(),this.find(t)},update:function(t){return this.localStorage().setItem(this.name+"-"+t.id,JSON.stringify(t)),_include(this.records,t.id.toString())||this.records.push(t.id.toString()),this.save(),this.find(t)},find:function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t.id))},findAll:function(){return this.records.map(function(t){return this.jsonData(this.localStorage().getItem(this.name+"-"+t))},this)},destroy:function(t){return t.isNew()?!1:(this.localStorage().removeItem(this.name+"-"+t.id),this.records=_reject(this.records,function(e){return e===t.id.toString()}),this.save(),t)},localStorage:function(){return localStorage},jsonData:function(t){return t&&JSON.parse(t)},_clear:function(){var t=this.localStorage(),e=new RegExp("^"+this.name+"-");t.removeItem(this.name);var i=Object.keys(t),r=_filter(i,function(t){return e.test(t)});r.forEach(function(e){t.removeItem(e)}),this.records.length=0},_storageSize:function(){return this.localStorage().length}}),t.LocalStorage.sync=window.Store.sync=t.localSync=function(e,i,r){var n,o,s=i.localStorage||i.collection.localStorage,a=t.Deferred&&t.Deferred();try{switch(e){case"read":n=void 0!=i.id?s.find(i):s.findAll();break;case"create":n=s.create(i);break;case"update":n=s.update(i);break;case"delete":n=s.destroy(i)}}catch(u){o=22===u.code&&0===s._storageSize()?"Private browsing is unsupported":u.message}return n?(r&&r.success&&("0.9.10"===t.VERSION?r.success(i,n,r):r.success(n)),a&&a.resolve(n)):(o=o?o:"Record Not Found",r&&r.error&&("0.9.10"===t.VERSION?r.error(i,o,r):r.error(o)),a&&a.reject(o)),r&&r.complete&&r.complete(n),a&&a.promise()},t.ajaxSync=t.sync,t.getSyncMethod=function(e){return e.localStorage||e.collection&&e.collection.localStorage?t.localSync:t.ajaxSync},t.sync=function(e,i,r){return t.getSyncMethod(i).apply(this,[e,i,r])},t.LocalStorage}),!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.jade=t():"undefined"!=typeof global?global.jade=t():"undefined"!=typeof self&&(self.jade=t())}(function(){return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=i[s]={exports:{}};e[s][0].call(l.exports,function(t){var i=e[s][1][t];return n(i?i:t)},l,l.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";function r(t){return null!=t&&""!==t}function n(t){return Array.isArray(t)?t.map(n).filter(r).join(" "):t}i.merge=function o(t,e){if(1===arguments.length){for(var i=t[0],n=1;n<t.length;n++)i=o(i,t[n]);return i}var s=t["class"],a=e["class"];(s||a)&&(s=s||[],a=a||[],Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]),t["class"]=s.concat(a).filter(r));for(var u in e)"class"!=u&&(t[u]=e[u]);return t},i.joinClasses=n,i.cls=function(t,e){for(var r=[],o=0;o<t.length;o++)r.push(e&&e[o]?i.escape(n([t[o]])):n(t[o]));var s=n(r);return s.length?' class="'+s+'"':""},i.attr=function(t,e,r,n){return"boolean"==typeof e||null==e?e?" "+(n?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?" "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'":r?" "+t+'="'+i.escape(e)+'"':" "+t+'="'+e+'"'},i.attrs=function(t,e){var r=[],o=Object.keys(t);if(o.length)for(var s=0;s<o.length;++s){var a=o[s],u=t[a];"class"==a?(u=n(u))&&r.push(" "+a+'="'+u+'"'):r.push(i.attr(a,u,!1,e))}return r.join("")},i.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},i.rethrow=function s(e,i,r,n){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&i||n))throw e.message+=" on line "+r,e;try{n=n||t("fs").readFileSync(i,"utf8")}catch(o){s(e,null,r)}var a=3,u=n.split("\n"),l=Math.max(r-a,0),c=Math.min(u.length,r+a),a=u.slice(l,c).map(function(t,e){var i=e+l+1;return(i==r?"  > ":"    ")+i+"| "+t}).join("\n");throw e.path=i,e.message=(i||"Jade")+":"+r+"\n"+a+"\n\n"+e.message,e}},{fs:2}],2:[function(){},{}]},{},[1])(1)});