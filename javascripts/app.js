!function(){"use strict";var e="undefined"!=typeof window?window:global;if("function"!=typeof e.require){var t={},r={},o=function(e,t){return{}.hasOwnProperty.call(e,t)},n=function(e,t){var r,o,n=[];r=/^\.\.?(\/|$)/.test(t)?[e,t].join("/").split("/"):t.split("/");for(var i=0,s=r.length;s>i;i++)o=r[i],".."===o?n.pop():"."!==o&&""!==o&&n.push(o);return n.join("/")},i=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t){return function(r){var o=i(t),s=n(o,r);return e.require(s,t)}},p=function(e,t){var o={id:e,exports:{}};return r[e]=o,t(o.exports,s(e),o),o.exports},a=function(e,i){var s=n(e,".");if(null==i&&(i="/"),o(r,s))return r[s].exports;if(o(t,s))return p(s,t[s]);var a=n(s,"./index");if(o(r,a))return r[a].exports;if(o(t,a))return p(a,t[a]);throw new Error('Cannot find module "'+e+'" from "'+i+'"')},u=function(e,r){if("object"==typeof e)for(var n in e)o(e,n)&&(t[n]=e[n]);else t[e]=r},l=function(){var e=[];for(var r in t)o(t,r)&&e.push(r);return e};e.require=a,e.require.define=u,e.require.register=u,e.require.list=l,e.require.brunch=!0}}(),require.register("application",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=t("models/people"),n=t("models/loans"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.start=function(){return Chaplin.mediator.people.fetch(),Chaplin.mediator.loans.fetch(),t.__super__.start.apply(this,arguments)},t.prototype.initMediator=function(){return Chaplin.mediator.people=new i,Chaplin.mediator.loans=new n,t.__super__.initMediator.apply(this,arguments)},t}(Chaplin.Application)}),require.register("controllers/base/controller",function(e,t,r){var o,n,i,s,p,a,u={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var o in t)u.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};p=t("views/layout/site-view"),s=t("models/people"),i=t("models/loans"),n=t("views/layout/header-view"),r.exports=o=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.beforeAction=function(){return this.compose("site",p),this.compose("header",n,{region:"header"})},t.prototype.findOrFetch=function(e,t,r,o){var n;return e?(n=t.get(e),n?o(n):t.fetch({success:function(t){return n=t.get(e),o(n?n:t.add())}})):(n=new r,o(n))},t.prototype.udpateModel=function(e,t,r){return e.isNew()&&t.add(e),e.set("updated_at",new Date),e.save(e.attributes,{success:function(e){return r.success?r.success(e):void 0},error:function(e,t){return error?error(e,t):void 0}})},t}(Chaplin.Controller)}),require.register("controllers/loans-controller",function(e,t,r){var o,n,i,s,p,a,u,l,c={}.hasOwnProperty,d=function(e,t){function r(){this.constructor=e}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("controllers/base/controller"),n=t("models/loan"),p=t("views/loans/loans-view"),i=t("views/loans/loan-edit-view"),a=Chaplin.mediator.loans,u=Chaplin.mediator.people,r.exports=s=function(e){function t(){return l=t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.subscribeEvent("saveLoan",this.update)},t.prototype.index=function(){return this.adjustTitle(""),this.view=new p({region:"main",collection:a,detailed:!0})},t.prototype.edit=function(e){var t=this;return this.findOrFetch(e.id,a,n,function(r){return t.adjustTitle(e.id?"Edit "+r.get("item_name")+" loan":"New loan"),e.person_id&&r.set("lendee_id",e.person_id),t.view=new i({model:r,region:"main"})})},t.prototype.update=function(e,t,r){var o,n,i=this;return o=e.get("item_name"),e=a.add(e),n=e.isNew()?"Successfully loaned out "+o+".":"Successfully edited the loan for "+o,e.set("updated_at",new Date),e.save(e.attributes,{success:function(e){return t&&t(e),i.redirectTo("home"),i.publishEvent("flash_message",n)},error:function(e,t){return r?r(e,t):void 0}})},t}(o)}),require.register("controllers/people-controller",function(e,t,r){var o,n,i,s,p,a,u,l,c,d,f={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var o in t)f.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("controllers/base/controller"),p=t("models/person"),i=t("models/people"),s=t("views/people/people-view"),a=t("views/people/person-detail-view"),u=t("views/people/person-edit-view"),l=Chaplin.mediator.loans,c=Chaplin.mediator.people,r.exports=n=function(e){function t(){return d=t.__super__.constructor.apply(this,arguments)}return h(t,e),t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.subscribeEvent("savePerson",this.update),this.subscribeEvent("destroyPerson",this.destroy)},t.prototype.index=function(){return this.adjustTitle("People"),this.view=new s({region:"main",collection:c})},t.prototype.edit=function(e){var t=this;return this.findOrFetch(e.id,c,p,function(r){return t.adjustTitle(e.id?"Edit "+r.full_name():"New Person"),t.view=new u({model:r,region:"main",collection:c})})},t.prototype.update=function(e){var t,r,o=this;return r=e.get("first_name")+" "+e.get("last_name"),t=e.isNew()?"Successfully added "+r:"Successfully edited "+r,this.udpateModel(e,c,{success:function(e){return o.redirectTo("person",{id:e.get("_id")}),o.publishEvent("flash_message",t)},error:function(e,t){return console.log(t),this.publishEvent("error",t)}})},t.prototype.show=function(e){var t=this;return this.findOrFetch(e.id,c,p,function(e){return t.adjustTitle(""+e.full_name()),t.view=new a({model:e,region:"main"})})},t.prototype.destroy=function(e){var t=this;return e=c.get(e),e.destroy({success:function(){var r;return r=""+e.get("first_name")+" was sucessfully removed",t.redirectTo("people"),t.publishEvent("flash_message",r)}})},t}(o)}),require.register("initialize",function(e,t){var r,o;r=t("application"),o=t("routes"),document.addEventListener("DOMContentLoaded",function(){return document.removeEventListener("DOMContentLoaded"),new r({title:"Loan Shark",controllerSuffix:"-controller",routes:o})},!1)}),require.register("lib/utils",function(e,t,r){var o;o=Chaplin.utils.beget(Chaplin.utils),"function"==typeof Object.seal&&Object.seal(o),r.exports=o}),require.register("lib/view-helper",function(){}),require.register("mediator",function(e,t,r){var o;o=r.exports=Chaplin.mediator}),require.register("models/base/collection",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("./model"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.model=n,t}(Chaplin.Collection)}),require.register("models/base/model",function(e,t,r){var o,n,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r.exports=o=function(e){function t(){return n=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.snyc=BackbonePouch.sync,t.prototype.idAttribute="_id",t}(Chaplin.Model)}),require.register("models/flash-message",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("./base/model"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.defaults={message:"Something needs your attention",lifespan:5e3},t}(n)}),require.register("models/item",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("/models/base/model"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t}(n)}),require.register("models/loan",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("/models/base/model"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.sync=BackbonePouch.sync({db:PouchDB("loan-shark-db")}),t.prototype.defaults={type:"loan",reconciled:!1},t.prototype.reconcile=function(){return this.set("reconciled",!0),this.set("date_reconciled",new Date),this.save()},t.prototype.unreconcile=function(){return this.set("reconciled",!1),this.unset("date_reconciled"),this.save()},t}(n)}),require.register("models/loans",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("/models/base/collection"),n=t("/models/loan"),r.exports=i=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=n,t.prototype.fallbackSelector=".empty",t.prototype.sync=BackbonePouch.sync({db:PouchDB("loan-shark-db"),fetch:"query",options:{query:{include_docs:!0,fun:{map:function(e){return"loan"===e.type?emit(e.position,null):void 0}},limit:10},changes:{include_docs:!0,filter:function(e){return e._deleted||"loan"===e.type}}}}),t.prototype.parse=function(e){return e.rows.map(function(e){return e.doc})},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.listenTo(this,"change",this.sort)},t.prototype.comparator=function(e){return e.get("reconciled")?1:-1},t}(o)}),require.register("models/people",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("/models/base/collection"),i=t("/models/person"),r.exports=n=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.model=i,t.prototype.sync=BackbonePouch.sync({db:PouchDB("loan-shark-db"),fetch:"query",options:{query:{include_docs:!0,fun:{map:function(e){return"person"===e.type?emit(e.position,null):void 0}},limit:10},changes:{include_docs:!0,filter:function(e){return e._deleted||"person"===e.type}}}}),t.prototype.parse=function(e){return e.rows.map(function(e){return e.doc})},t}(o)}),require.register("models/person",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("/models/base/model"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.sync=BackbonePouch.sync({db:PouchDB("loan-shark-db")}),t.prototype.defaults={type:"person",first_name:"",last_name:"",bounty:0},t.prototype.initialize=function(){return t.__super__.initialize.apply(this,arguments),this.isNew()?void 0:(this.calculateBounty(),this.addBountyListener())},t.prototype.addBountyListener=function(){return this.listenTo(Chaplin.mediator.loans,"change remove add",function(e){return e.get("lendee_id")===this.get("_id")?this.calculateBounty():void 0})},t.prototype.calculateBounty=function(){var e,t,r;return e=Chaplin.mediator.loans.where({lendee_id:this.get("_id"),reconciled:!1}),r=e.map(function(e){return parseFloat(e.get("value"))}),t=0===r.length?0:r.reduce(function(e,t){return e+t}),this.set("bounty",t),this.save()},t.prototype.full_name=function(){return this.get("first_name")+" "+this.get("last_name")},t.prototype.destroy=function(){var e,r,o,n;for(r=Chaplin.mediator.loans.where({lendee_id:this.get("_id")}),o=0,n=r.length;n>o;o++)e=r[o],e.destroy();return t.__super__.destroy.apply(this,arguments)},t}(o)}),require.register("models/value-calculator",function(e,t,r){var o;r.exports=o=function(){function e(){}return e}()}),require.register("routes",function(e,t,r){r.exports=function(e){return e("","loans#index",{name:"home"}),e("loans","loans#index",{name:"loans"}),e("loans/new","loans#edit",{name:"new_loan"}),e("loans/:id/edit","loans#edit",{name:"edit_loan"}),e("people","people#index",{name:"people"}),e("people/new","people#edit",{name:"new_person"}),e("people/:id","people#show",{name:"person"}),e("people/:id/edit","people#edit",{name:"edit_person"}),e("people/:person_id/loans/new","loans#edit",{name:"person_new_loan"})}}),require.register("views/base/collection-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("./view"),r.exports=o=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t.prototype.getTemplateFunction=n.prototype.getTemplateFunction,t.prototype.animationDuration=0,t}(Chaplin.CollectionView)}),require.register("views/base/view",function(e,t,r){var o,n,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};t("lib/view-helper"),r.exports=o=function(e){function t(){return n=t.__super__.constructor.apply(this,arguments)}return s(t,e),t.prototype.optionNames=Chaplin.View.prototype.optionNames.concat(["template"]),t.prototype.autoRender=!0,t.prototype.autoBind=!0,t.prototype.listen={"change model":"updateView"},t.prototype.getTemplateFunction=function(){return this.template},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.model&&(this.attr_names=Object.keys(this.model.attributes),this.autoBind)?this.updateView():void 0},t.prototype.updateView=function(){var e,t,r,o,n,i,s;for(i=this.attr_names,s=[],o=0,n=i.length;n>o;o++)e=i[o],t=this.el.querySelector("[name='"+e+"']"),t&&(t.value=this.model.get(e)),r=this.el.querySelector("[data-bind='"+e+"']"),s.push(r?r.innerHTML=this.model.get(e):void 0);return s},t.prototype.save=function(){var e,t,r,o,n,i,s,p,a=this;for(t=[],s=this.el.getElementsByTagName("input"),r=0,n=s.length;n>r;r++)e=s[r],t.push(e);for(p=this.el.getElementsByTagName("select"),o=0,i=p.length;i>o;o++)e=p[o],t.push(e);return t.forEach(function(e){var t;return t=e.getAttribute("name"),a.model.set(t,e.value,{silent:!0})}),this.publishEvent("save"+this.model.constructor.name,this.model)},t.prototype.destroy=function(e){return e.preventDefault(),this.publishEvent("destroy"+this.model.constructor.name,this.model)},t}(Chaplin.View)}),require.register("views/form_elements/select-input-view",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/collection-view"),i=t("./select-option-view"),r.exports=n=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.autoRender=!0,t.prototype.tagName="select",t.prototype.animationDuration=0,t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.value_attr=e.value_attr,this.label_attr=e.label_attr,this.name=e.name,this.placeholder=e.placeholder},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.el.name=this.name,this.el.placeholder=this.placeholder},t.prototype.initItemView=function(e){return new i({model:e,value_attr:this.value_attr,label_attr:this.label_attr,src_model:this.model,name:this.name})},t}(o)}),require.register("views/form_elements/select-option-view",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),i=t("./templates/option"),r.exports=o=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.autoRender=!0,t.prototype.tagName="option",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.src_model=e.src_model,this.name=e.name,this.value_attr=e.value_attr,"function"==typeof this.value_attr&&(this.value_attr=this.value_attr()),this.label_attr=e.label_attr,"function"==typeof this.label_attr?this.label_attr=this.label_attr():void 0},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.el.value=this.model.get(this.value_attr),this.el.innerHTML=this.label_attr,this.model.get(this.value_attr)===this.src_model.get(this.name)?this.el.selected=!0:void 0},t}(n)}),require.register("views/form_elements/templates/option",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r.first_name,n=r.last_name;return t.push(jade.escape(null==(jade.interp=o)?"":jade.interp)+"&nbsp;"+jade.escape(null==(jade.interp=n)?"":jade.interp)),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/items/item-collection-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/collection-view"),r.exports=n=function(e){function t(){return i=t.__super__.constructor.apply(this,arguments)}return p(t,e),t}(o)}),require.register("views/items/item-edit-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),r.exports=o=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.template=t("./templates/item-edit"),r}(n)}),require.register("views/items/templates/item-edit",function(e,t,r){var o=function(){var e=[];return e.push("<h1>Hello</h1>"),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/layout/flash-message-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),r.exports=o=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.autoRender=!0,r.prototype.autoAttach=!0,r.prototype.template=t("./templates/flash-message"),r.prototype.className="flash",r.prototype.events={"click .dismiss":"dismissFlash"},r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.subscribeEvent("dismissFlash",this.dismissFlash)},r.prototype.render=function(){var e,t=this;return r.__super__.render.apply(this,arguments),e=setTimeout(function(){return t.dismissFlash(),clearTimeout(e)},this.model.get("lifespan"))},r.prototype.dismissFlash=function(e){return e&&e.preventDefault(),this.model?this.model.dispose():void 0},r}(n)}),require.register("views/layout/header-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),r.exports=o=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.autoRender=!0,r.prototype.className="header",r.prototype.tagName="header",r.prototype.template=t("./templates/header"),r}(n)}),require.register("views/layout/site-view",function(e,t,r){var o,n,i,s,p,a={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var o in t)a.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/base/view"),o=t("models/flash-message"),n=t("views/layout/flash-message-view"),r.exports=i=function(e){function r(){return p=r.__super__.constructor.apply(this,arguments)}return u(r,e),r.prototype.container="body",r.prototype.id="site-container",r.prototype.regions={header:"#header-container",main:"#page-container",flash_messages:"#flash_messages"},r.prototype.template=t("./templates/site"),r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.subscribeEvent("flash_message",this.renderFlash),this.subscribeEvent("clear_flash_message",this.clearFlash)},r.prototype.renderFlash=function(e){return this.publishEvent("dismissAlert"),this.flashMessage=new o({message:e}),this.flashMessageView=new n({model:this.flashMessage,region:"flash_messages"})},r.prototype.clearFlash=function(){return this.flashMessage?this.flashMessage.dispose():void 0},r}(s)}),require.register("views/layout/templates/flash-message",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r.message;return t.push(jade.escape(null==(jade.interp=o)?"":jade.interp)+'<a href="#" class="dismiss">&times;</a>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/layout/templates/header",function(e,t,r){var o=function(){var e=[];return e.push('<h1><a href="/">Loan Shark</a></h1><nav><a href="/loans">Loans</a><a href="/loans/new" class="secondary">New Loan</a><a href="/people">People</a><a href="/people/new" class="secondary">New Person</a></nav>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/layout/templates/site",function(e,t,r){var o=function(){var e=[];return e.push('<div id="header-container" class="header-container"></div><div id="user_info"></div><div class="outer-page-container"><div id="flash_messages"></div><div id="page-container" class="page-container"></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/loans/loan-detail-view",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/loans/loan-view"),i=t("views/people/person-view"),r.exports=o=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments)}return a(r,e),r.prototype.template=t("./templates/loan-detail"),r.prototype.render=function(){return r.__super__.render.apply(this,arguments),this.renderUserView()},r.prototype.renderUserView=function(){var e;return e=Chaplin.mediator.people.get(this.model.get("lendee_id")),new i({model:e,el:this.el.querySelector(".person")})},r}(n)}),require.register("views/loans/loan-edit-view",function(e,t,r){var o,n,i,s,p,a,u={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var o in t)u.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};p=t("views/base/view"),i=t("views/people/people-view"),s=t("views/form_elements/select-input-view"),o=t("models/loan"),r.exports=n=function(e){function r(){return a=r.__super__.constructor.apply(this,arguments)}return l(r,e),r.prototype.template=t("./templates/loan-edit"),r.prototype.events={"click button":"save"},r.prototype.regions={people:".people"},r.prototype.render=function(){var e;return r.__super__.render.apply(this,arguments),e=new s({collection:Chaplin.mediator.people,value_attr:"_id",container:this.el,name:"lendee_id",placeholder:"Lendee",region:"people",model:this.model,label_attr:function(){var e;return e=this.model,e.get("first_name")+" "+e.get("last_name")}}),this.subview("people_select",e)},r.prototype.save=function(){return this.model||(this.model=new o),r.__super__.save.apply(this,arguments)},r}(p)}),require.register("views/loans/loan-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),r.exports=o=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.template=t("./templates/loan"),r.prototype.events={"click .destroy":"destroy","click .reconcile":"reconcile","click .unreconcile":"unreconcile"},r.prototype.destroy=function(e){return e.preventDefault(),this.model.destroy()},r.prototype.reconcile=function(e){return e.preventDefault(),this.model.reconcile(),this.render()},r.prototype.unreconcile=function(e){return e.preventDefault(),this.model.unreconcile(),this.render()},r}(n)}),require.register("views/loans/loans-view",function(e,t,r){var o,n,i,s,p,a,u={}.hasOwnProperty,l=function(e,t){function r(){this.constructor=e}for(var o in t)u.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/collection-view"),i=t("views/loans/loan-view"),n=t("views/loans/loan-detail-view"),p=t("./templates/loans"),r.exports=s=function(e){function t(){return a=t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.template=p,t.prototype.listSelector=".loans",t.prototype.initialize=function(e){return t.__super__.initialize.apply(this,arguments),this.detailed=e.detailed},t.prototype.initItemView=function(e){return this.detailed?new n({model:e}):new i({model:e})},t}(o)}),require.register("views/loans/templates/loan-detail",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r.reconciled,n=r.item_name,i=r.value,s=r._id;return t.push("<div"+jade.cls(["loan",""+(o?"reconciled":"")],[null,!0])+"><h3>"+jade.escape(null==(jade.interp=n)?"":jade.interp)+'<span class="value">'+jade.escape(null==(jade.interp=" ($"+i+")")?"":jade.interp)+'</span></h3><div class="person"></div><div class="actions">'),t.push(o?'<button href="#" class="unreconcile">Unreconcile</button>':'<button href="#" class="destroy">Remove</button><button href="#" class="reconcile">Reconcile</button><a'+jade.attr("href","/loans/"+s+"/edit",!0,!1)+' class="edit">Edit</a>'),t.push("</div></div>"),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/loans/templates/loan-edit",function(e,t,r){var o=function(){var e=[];return e.push('<div class="people"></div><br/><input name="item_name" placeholder="Item Name"/><input name="value" placeholder="Value"/><button>Save</button>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/loans/templates/loan",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r.reconciled,n=r.item_name,i=r.value,s=r._id;return t.push("<div"+jade.cls(["loan",""+(o?"reconciled":"")],[null,!0])+">"+jade.escape(null==(jade.interp=n)?"":jade.interp)+jade.escape(null==(jade.interp=" ($"+i+")")?"":jade.interp)+'<div class="person"></div><div class="actions">'),t.push(o?'<button href="#" class="unreconcile">Unreconcile</button>':'<button href="#" class="destroy">Remove</button><button href="#" class="reconcile">Reconcile</button><a'+jade.attr("href","/loans/"+s+"/edit",!0,!1)+' class="edit">Edit</a>'),t.push("</div></div>"),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/loans/templates/loans",function(e,t,r){var o=function(){var e=[];return e.push('<div class="loans"></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/people/people-view",function(e,t,r){var o,n,i,s,p={}.hasOwnProperty,a=function(e,t){function r(){this.constructor=e}for(var o in t)p.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};o=t("views/base/collection-view"),i=t("views/people/person-view"),r.exports=n=function(e){function t(){return s=t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.itemView=i,t}(o)}),require.register("views/people/person-detail-view",function(e,t,r){var o,n,i,s,p,a,u,l={}.hasOwnProperty,c=function(e,t){function r(){this.constructor=e}for(var o in t)l.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/people/person-view"),n=t("views/loans/loans-view"),o=t("models/loans"),a=t("views/people/templates/person-detail"),p=Chaplin.mediator.loans,r.exports=i=function(e){function t(){return u=t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.template=a,t.prototype.regions={borrowed:".borrowed-items"},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.renderBorrowed()},t.prototype.renderBorrowed=function(){var e,t;return e=p.where({lendee_id:this.model.get("_id")}),e=new o(e),t=new n({collection:e,details:!1,region:"borrowed"}),this.subview("loans",t)},t}(s)}),require.register("views/people/person-edit-view",function(e,t,r){var o,n,i,s,p,a={}.hasOwnProperty,u=function(e,t){function r(){this.constructor=e}for(var o in t)a.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};s=t("views/base/view"),n=t("models/person"),o=t("views/people/people-view"),r.exports=i=function(e){function r(){return p=r.__super__.constructor.apply(this,arguments)}return u(r,e),r.prototype.template=t("./templates/person-edit"),r.prototype.events={"click button.save":"save","click button.destroy":"destroy"},r.prototype.save=function(){return this.model||(this.model=new n),r.__super__.save.apply(this,arguments)},r}(s)}),require.register("views/people/person-view",function(e,t,r){var o,n,i,s={}.hasOwnProperty,p=function(e,t){function r(){this.constructor=e}for(var o in t)s.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};n=t("views/base/view"),r.exports=o=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments)}return p(r,e),r.prototype.template=t("./templates/person"),r.prototype.className="person",r.prototype.events={mouseover:"toggleControls",mouseout:"toggleControls"},r.prototype.render=function(){return r.__super__.render.apply(this,arguments),this.$controls=this.el.querySelector(".controls"),this.$controls.style.display="none"},r.prototype.toggleControls=function(e){return this.$controls.style.display="mouseover"===e.type?"block":"none"},r}(n)}),require.register("views/people/templates/person-detail",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r.first_name,n=r.last_name,i=r._id,s=r.bounty;return t.push("<h1>"+jade.escape(null==(jade.interp=o)?"":jade.interp)+"&nbsp;"+jade.escape(null==(jade.interp=n)?"":jade.interp)+'</h1><div class="controls"><a'+jade.attr("href","/people/"+i+"/edit",!0,!1)+">Edit &nbsp;"+jade.escape(null==(jade.interp=o)?"":jade.interp)+'</a></div><div class="details"><h3>Bounty: &nbsp;<span data-bind="bounty" class="bounty">'+jade.escape(null==(jade.interp=s)?"":jade.interp)+'</span></h3></div><div class="borrowed-items"></div><a'+jade.attr("href","/people/"+i+"/loans/new",!0,!1)+">Loan something to "+jade.escape(null==(jade.interp=o)?"":jade.interp)+"</a>"),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/people/templates/person-edit",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r._id;
return t.push('<input name="first_name" placeholder="First Name"/><input name="last_name" placeholder="Last Name"/><button class="save">Save</button><br/><br/>'),o&&t.push('<button class="destroy">Delete</button>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)}),require.register("views/people/templates/person",function(e,t,r){var o=function(e){var t=[],r=e||{},o=r._id,n=r.first_name,i=r.last_name;return t.push("<a"+jade.attr("href","people/"+o,!0,!1)+">"+jade.escape(null==(jade.interp=n)?"":jade.interp)+"&nbsp;"+jade.escape(null==(jade.interp=i)?"":jade.interp)+'</a><div class="controls"><a'+jade.attr("href","/people/"+o+"/edit",!0,!1)+">Edit &nbsp;"+jade.escape(null==(jade.interp=n)?"":jade.interp)+"</a></div>"),t.join("")};"function"==typeof define&&define.amd?define([],function(){return o}):"object"==typeof r&&r&&r.exports&&(r.exports=o)});